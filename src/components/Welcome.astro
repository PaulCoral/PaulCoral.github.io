---
import { jobs } from "../data/jobs";
import { technologies } from "../data/technologies";
import { useTranslations } from "../utils/i18n";
import Translation from "./atom/Translation.astro";
import CardTemplate from "./composites/CardTemplate.astro";
---

<div id="container">
  <main class="flex flex-col items-center">
    <div class="flex flex-col gap-16 max-w-4xl w-full p-2">
      <section
        class="flex flex-col gap-2 text-gray-700 text-lg italic text-center"
      >
        <p>
          <Translation key="home.summary" />
        </p>
      </section>

      <section>
        <h2
          class="text-accent border-b-4 border-accent text-2xl font-semibold mb-8"
        >
          <Translation key="home.work-experience" />
        </h2>
        <div class="flex flex-col gap-6 px-4">
          {
            jobs.map((job) => {
              const techs = job.relatedTech.map((k) => technologies[k]);
              return (
                <CardTemplate className="px-4 py-2">
                  <div class="flex flex-wrap justify-between mb-2">
                    <div class="flex flex-col">
                      <h1 class="text-2xl text-accent font-semibold">
                        <Translation key={job.title} />
                      </h1>
                      <p class="text-soft">{job.company}</p>
                      <p class="text-soft">
                        {job.from} - {job.to}
                      </p>
                    </div>
                    <div class="flex gap-2">
                      {techs.map((t) => {
                        return (
                          <a href={`#tech-${t.title}`}>
                            <CardTemplate
                              className="p-1.5 h-12 aspect-square flex items-center justify-center"
                              hoverHightlight
                            >
                              {typeof t.img === "string" ? (
                                <img
                                  class="max-w-full max-h-full"
                                  alt={`${t.title} logo`}
                                  src={t.img}
                                />
                              ) : (
                                <t.img height="100%" width={null} />
                              )}
                            </CardTemplate>
                          </a>
                        );
                      })}
                    </div>
                  </div>
                  <p class="text-justify">
                    <Translation key={job.description} />
                  </p>
                </CardTemplate>
              );
            })
          }
        </div>
      </section>

      <section>
        <h2
          class="text-accent border-b-4 border-accent text-2xl font-semibold mb-8"
        >
          <Translation key={"home.technologies"} />
        </h2>

        <div class="flex flex-wrap justify-evenly gap-6 px-4">
          {
            Object.values(technologies).map((tech) => (
              <CardTemplate
                id={`tech-${tech.title}`}
                className="w-xs scroll-mt-2"
              >
                <div class="flex flex-col items-center px-4 py-8 gap-6 h-full">
                  <h1 class="text-4xl text-accent font-semibold">
                    {tech.title}
                  </h1>
                  <div class="max-h-32 h-32">
                    {typeof tech.img === "string" ? (
                      <img
                        class="h-full"
                        src={tech.img}
                        alt={`${tech.title} logo`}
                      />
                    ) : (
                      <tech.img height="100%" width={null} />
                    )}
                  </div>
                  <div class="grow flex justify-center items-center">
                    <div class="text-center">
                      <Translation key={tech.description} />
                    </div>
                  </div>
                  <a href={tech.link}>
                    <Translation key={"common.website"} />
                  </a>
                </div>
              </CardTemplate>
            ))
          }
        </div>
      </section>
    </div>
  </main>
</div>

<style></style>
